

<head>
	<title>Task Manager</title>
</head>

<body>

	<div class="tasks">
		<div class="menu">
			<h2>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
			<button class="create-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
		</div>

	<ul class="tasks-list">
		<li class="item">
			<p>hi</p>
			<div>
				<button class="edit-btn">üñä</button>
				<button class="delete-btn">üóë</button>
			</div>
		</li>
	</ul>

	</div>

	<div class="edit-task">
		<textarea id="task-text"></textarea>
		<div class=tool>
			<input type=checkbox id=priority />
			<label for=priority>High priority</label>
			<div>
				<button class="save-btn">Save</button>
				<button class="cancel-btn">Cancel</button>
			</div>
		</div>
	</div>

</body>

<style>

:root
{
	--bg-color: #1a1b26;
	--txt-color: #acb0b4;
	--up-color: #a75d7c;
	--p-color: #0d8461;
}

*
{
	font-family: monospace;
}

body
{
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-gap: 20px;
	padding: 24px;
	color: var(--txt-color);
	background-color: var(--bg-color);
}

.edit-task
{
	display: none;	
}

#task-text
{
	width: 100%;
	background-color: var(--bg-color);
	border: 2px solid var(--txt-color);
	border-radius: 5px;
	padding: 10px;
	color: var(--txt-color);
	resize: none;
	overflow-y: none;
}

.tool
{
	width: 100%;
	padding: 15px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#priority
{
	display: none;
}

.priority-text
{
	color: var(--p-color);
	font-weight: bold;
}

#priority:checked + label
{
	color: var(--p-color);
	font-weight: bold;
}

label[for=priority]:hover
{
	cursor: pointer;
}

label[for=priority]
{
	color: var(--up-color);
	font-size: 15px;
}



.tasks, .edit-task
{
	background-color: var(--bg-color);
	border: 2px solid var(--txt-color);
	border-radius: 5px;
	padding: 10px 15px;
}

.save-btn:hover, .cancel-btn:hover
{
	cursor: pointer;
	color: var(--bg-color);
	background-color: var(--txt-color);
}

.save-btn, .cancel-btn
{
	background-color: var(--bg-color);
	border: 2px solid var(--txt-color);
	border-radius: 5px;
	padding: 10px 15px;
	color: var(--txt-color);
	font-size: 15px;
	
}

.delete-btn, .edit-btn
{
	font-size: 15px;
	background-color: var(--bg-color);
	border: 2px solid var(--txt-color);
	border-radius: 5px;
	padding: 10px 15px;
	color: var(--txt-color);
}

.create-btn
{
	background-color: var(--bg-color);
	border: 2px solid var(--txt-color);
	border-radius: 5px;
	padding: 10px 15px;
	color: var(--txt-color);
}

.menu
{
	display: flex;
    justify-content: space-between;
    align-items: center;
}

.create-btn:hover, .delete-btn:hover, .edit-btn:hover
{
	cursor: pointer;
	color: var(--bg-color);
	background-color: var(--txt-color);
}

.tasks-list
{
	padding: 0;
}

.item:hover
{
	cursor: pointer;
}

.item
{
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 10;
	font-size: 15px;
}

.completed {
    text-decoration: line-through;
    font-style: italic;
}

</style>

<script>

const list = document.querySelector('.tasks-list');
const [text, prio] = ['task-text', 'priority'].map(id => document.getElementById(id));
const edit = document.querySelector('.edit-task');
const createButton = document.querySelector('.create-btn');
const cancelButton = document.querySelector('.cancel-btn');
const saveButton = document.querySelector('.save-btn');
let currentEditItem = null;

list.addEventListener('click', function(e)
{
	const item = e.target.closest('.item');
	if (!item) return;

	if (e.target.classList.contains('delete-btn'))
		item.remove();

	else if (e.target.classList.contains('edit-btn')) 
	{
        const taskParagraph = item.querySelector('p');
        edit.style.display = 'block';
        text.value = taskParagraph.textContent;
        prio.checked = taskParagraph.classList.contains('priority-text');
        text.focus();
        currentEditItem = item;
    }

	else
		item.querySelector('p').classList.toggle('completed');			
})

createButton.addEventListener('click', function() {
    edit.style.display = 'block';
    text.value = '';
    prio.checked = false;
    text.focus();
    currentEditItem = null;
});

cancelButton.addEventListener('click', function() {
    edit.style.display = 'none';
    text.value = '';
    prio.checked = false;
    currentEditItem = null;
});

saveButton.addEventListener('click', function() 
{
    const txt = text.value.trim();

    if (!txt)
        return;
    
    if (currentEditItem) 
    {
        const taskParagraph = currentEditItem.querySelector('p');
        taskParagraph.textContent = txt;
        
        if (prio.checked)
            taskParagraph.classList.add('priority-text');
        else
            taskParagraph.classList.remove('priority-text');
    } 
    
    else 
    {
    	const newItem = document.createElement('li');
    	newItem.className = 'item';

		const paragraph = document.createElement('p');
		paragraph.textContent = txt;
		if (prio.checked)
		    paragraph.classList.add('priority-text');

		const buttonDiv = document.createElement('div');
		buttonDiv.innerHTML = `
		    <button class="edit-btn">üñä</button>
		    <button class="delete-btn">üóë</button>
		`;

		newItem.appendChild(paragraph);
		newItem.appendChild(buttonDiv);

		list.prepend(newItem);
    }
    
    edit.style.display = 'none';
    text.value = '';
    prio.checked = false;
    currentEditItem = null;
});

</script>
